{"ast":null,"code":"import _createForOfIteratorHelper from\"C:/Users/lenovo/Desktop/CAB_RENTAL/client/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper\";import _slicedToArray from\"C:/Users/lenovo/Desktop/CAB_RENTAL/client/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import{useSelector,useDispatch}from'react-redux';import DefaultLayout from'../components/DefaultLayout';import{getAllCars}from'../redux/actions/carsActions';import{Col,Row,Divider,DatePicker,Checkbox}from'antd';import{Link}from'react-router-dom';import Spinner from'../components/Spinner';import moment from'moment';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var RangePicker=DatePicker.RangePicker;function Home(){var _useSelector=useSelector(function(state){return state.carsReducer;}),cars=_useSelector.cars;var _useSelector2=useSelector(function(state){return state.alertsReducer;}),loading=_useSelector2.loading;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),totalCars=_useState2[0],setTotalcars=_useState2[1];var dispatch=useDispatch();useEffect(function(){dispatch(getAllCars());},[]);useEffect(function(){setTotalcars(cars);},[cars]);function setFilter(values){var selectedFrom=moment(values[0],'MMM DD yyyy HH:mm');var selectedTo=moment(values[1],'MMM DD yyyy HH:mm');var temp=[];var _iterator=_createForOfIteratorHelper(cars),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var car=_step.value;if(car.bookedTimeSlots.length==0){temp.push(car);}else{var _iterator2=_createForOfIteratorHelper(car.bookedTimeSlots),_step2;try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var booking=_step2.value;if(selectedFrom.isBetween(booking.from,booking.to)||selectedTo.isBetween(booking.from,booking.to)||moment(booking.from).isBetween(selectedFrom,selectedTo)||moment(booking.to).isBetween(selectedFrom,selectedTo)){}else{temp.push(car);}}}catch(err){_iterator2.e(err);}finally{_iterator2.f();}}}}catch(err){_iterator.e(err);}finally{_iterator.f();}setTotalcars(temp);}return/*#__PURE__*/_jsxs(DefaultLayout,{children:[/*#__PURE__*/_jsx(Row,{className:\"mt-3\",justify:\"center\",children:/*#__PURE__*/_jsx(Col,{lg:20,sm:24,className:\"d-flex justify-content-left\",children:/*#__PURE__*/_jsx(RangePicker,{showTime:{format:'HH:mm'},format:\"MMM DD yyyy HH:mm\",onChange:setFilter})})}),loading==true&&/*#__PURE__*/_jsx(Spinner,{}),/*#__PURE__*/_jsx(Row,{justify:\"center\",gutter:16,children:totalCars.map(function(car){return/*#__PURE__*/_jsx(Col,{lg:5,sm:24,xs:24,children:/*#__PURE__*/_jsxs(\"div\",{className:\"car p-2 bs1\",children:[/*#__PURE__*/_jsx(\"img\",{src:car.image,className:\"carimg\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"car-content d-flex align-items-center justify-content-between\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-left pl-2\",children:[/*#__PURE__*/_jsx(\"p\",{children:car.name}),/*#__PURE__*/_jsxs(\"p\",{children:[\" Rent Per Hour \",car.rentPerHour,\" /-\"]})]}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"button\",{className:\"btn1 mr-2\",children:/*#__PURE__*/_jsx(Link,{to:\"/booking/\".concat(car._id),children:\"Book Now\"})})})]})]})});})})]});}export default Home;","map":{"version":3,"sources":["C:/Users/lenovo/Desktop/CAB_RENTAL/client/src/pages/Home.js"],"names":["React","useState","useEffect","useSelector","useDispatch","DefaultLayout","getAllCars","Col","Row","Divider","DatePicker","Checkbox","Link","Spinner","moment","RangePicker","Home","state","carsReducer","cars","alertsReducer","loading","totalCars","setTotalcars","dispatch","setFilter","values","selectedFrom","selectedTo","temp","car","bookedTimeSlots","length","push","booking","isBetween","from","to","format","map","image","name","rentPerHour","_id"],"mappings":"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","sourcesContent":["import React , {useState,useEffect} from 'react'\r\nimport { useSelector , useDispatch } from 'react-redux'\r\nimport DefaultLayout from '../components/DefaultLayout'\r\nimport { getAllCars } from '../redux/actions/carsActions'\r\nimport { Col, Row , Divider , DatePicker, Checkbox} from 'antd'\r\nimport {Link} from 'react-router-dom'\r\nimport Spinner from '../components/Spinner';\r\nimport moment from 'moment'\r\nconst {RangePicker} = DatePicker\r\nfunction Home() {\r\n    const {cars} = useSelector(state=>state.carsReducer)\r\n    const {loading} = useSelector(state=>state.alertsReducer)\r\n    const [totalCars , setTotalcars] = useState([])\r\n    const dispatch = useDispatch()\r\n    \r\n\r\n    useEffect(() => {\r\n        dispatch(getAllCars())\r\n    }, [])\r\n\r\n    useEffect(() => {\r\n\r\n        setTotalcars(cars)\r\n        \r\n    }, [cars])\r\n\r\n\r\n    function setFilter(values){\r\n\r\n        var selectedFrom = moment(values[0] , 'MMM DD yyyy HH:mm')\r\n        var selectedTo = moment(values[1] , 'MMM DD yyyy HH:mm')\r\n\r\n        var temp=[]\r\n\r\n        for(var car of cars){\r\n\r\n              if(car.bookedTimeSlots.length == 0){\r\n                  temp.push(car)\r\n              }\r\n              else{\r\n\r\n                   for(var booking of car.bookedTimeSlots) {\r\n\r\n                       if(selectedFrom.isBetween(booking.from , booking.to) ||\r\n                       selectedTo.isBetween(booking.from , booking.to) || \r\n                       moment(booking.from).isBetween(selectedFrom , selectedTo) ||\r\n                       moment(booking.to).isBetween(selectedFrom , selectedTo)\r\n                       )\r\n                       {\r\n\r\n                       }\r\n                       else{\r\n                           temp.push(car)\r\n                       }\r\n\r\n                   }\r\n\r\n              }\r\n\r\n        }\r\n\r\n\r\n        setTotalcars(temp)\r\n\r\n\r\n    }\r\n\r\n    return (\r\n        <DefaultLayout>\r\n\r\n             <Row className='mt-3' justify='center'>\r\n                 \r\n                 <Col lg={20} sm={24} className='d-flex justify-content-left'>\r\n\r\n                     <RangePicker showTime={{format: 'HH:mm'}} format='MMM DD yyyy HH:mm' onChange={setFilter}/>\r\n                 \r\n                 </Col>\r\n\r\n             </Row>\r\n\r\n              {loading == true && (<Spinner/>)}\r\n\r\n\r\n              \r\n              <Row justify='center' gutter={16}>\r\n\r\n                   {totalCars.map(car=>{\r\n                       return <Col lg={5} sm={24} xs={24}>\r\n                            <div className=\"car p-2 bs1\">\r\n                               <img src={car.image} className=\"carimg\"/>\r\n\r\n                               <div className=\"car-content d-flex align-items-center justify-content-between\">\r\n\r\n                                    <div className='text-left pl-2'>\r\n                                        <p>{car.name}</p>\r\n                                        <p> Rent Per Hour {car.rentPerHour} /-</p>\r\n                                    </div>\r\n\r\n                                    <div>\r\n                                        <button className=\"btn1 mr-2\"><Link to={`/booking/${car._id}`}>Book Now</Link></button>\r\n                                    </div>\r\n\r\n                               </div>\r\n                            </div>\r\n                       </Col>\r\n                   })}\r\n\r\n              </Row>\r\n\r\n        </DefaultLayout>\r\n    )\r\n}\r\n\r\nexport default Home\r\n"]},"metadata":{},"sourceType":"module"}